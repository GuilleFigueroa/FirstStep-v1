import{d as C,e as S,r as t,j as e}from"./index-Hd3KRolj.js";import{C as x,i as u,f as F,g as P,h as E,L as h,I as j,B as f,j as L}from"./supabase-CNU5yfv7.js";import{C as k,L as p,a as z,E as I,u as T}from"./authService-DznLNm-2.js";function R(){const o=C();S();const[r,g]=t.useState(""),[i,N]=t.useState(""),[n,w]=t.useState(!1),[s,d]=t.useState(!1),[a,c]=t.useState(null),[v,y]=t.useState(!1),b=async l=>{if(l.preventDefault(),c(null),r.length<6){c("La contraseña debe tener al menos 6 caracteres");return}if(r!==i){c("Las contraseñas no coinciden");return}d(!0);const m=await T(r);m.success?(y(!0),setTimeout(()=>o("/"),3e3)):c(m.error||"Error al actualizar contraseña"),d(!1)};return v?e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:e.jsx(x,{className:"w-full max-w-md border-green-200 bg-green-50",children:e.jsx(u,{className:"pt-6",children:e.jsxs("div",{className:"text-center space-y-3",children:[e.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto",children:e.jsx(k,{className:"w-8 h-8 text-green-600"})}),e.jsx("h3",{className:"text-xl font-semibold text-green-900",children:"¡Contraseña actualizada!"}),e.jsx("p",{className:"text-sm text-green-700",children:"Tu contraseña ha sido actualizada exitosamente. Serás redirigido al login..."})]})})})}):e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"w-full max-w-md space-y-8",children:[e.jsxs("div",{className:"flex items-center justify-center gap-3",children:[e.jsx("div",{className:"w-14 h-14 rounded-lg flex items-center justify-center",style:{backgroundColor:"#353535"},children:e.jsx("img",{src:"/Icono-rayo-firststep.png",alt:"FirstStep",className:"w-10 h-10 object-contain"})}),e.jsx("span",{className:"text-[#7572FF] text-xl font-semibold",children:"FirstStep"})]}),e.jsxs(x,{children:[e.jsxs(F,{children:[e.jsx(P,{children:"Nueva Contraseña"}),e.jsx(E,{children:"Ingresa tu nueva contraseña"})]}),e.jsx(u,{children:e.jsxs("form",{onSubmit:b,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(h,{htmlFor:"password",children:"Nueva contraseña"}),e.jsxs("div",{className:"relative",children:[e.jsx(p,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),e.jsx(j,{id:"password",type:n?"text":"password",placeholder:"••••••••",className:"pl-10 pr-10",value:r,onChange:l=>g(l.target.value),disabled:s||!!a}),e.jsx("button",{type:"button",onClick:()=>w(!n),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",disabled:s||!!a,children:n?e.jsx(z,{className:"w-4 h-4"}):e.jsx(I,{className:"w-4 h-4"})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(h,{htmlFor:"confirmPassword",children:"Confirmar contraseña"}),e.jsxs("div",{className:"relative",children:[e.jsx(p,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),e.jsx(j,{id:"confirmPassword",type:n?"text":"password",placeholder:"••••••••",className:"pl-10",value:i,onChange:l=>N(l.target.value),disabled:s||!!a})]})]}),a&&e.jsx("div",{className:"text-red-600 text-sm text-center bg-red-50 p-2 rounded",children:a}),e.jsx(f,{type:"submit",className:"w-full bg-[#7572FF] hover:bg-[#6863E8] text-white",size:"lg",disabled:s||!r||!i||!!a,children:s?e.jsxs(e.Fragment,{children:[e.jsx(L,{className:"mr-2 h-4 w-4 animate-spin"}),"Actualizando..."]}):"Actualizar Contraseña"}),e.jsx("div",{className:"text-center",children:e.jsx(f,{type:"button",variant:"link",className:"text-[#7572FF] font-medium",onClick:()=>o("/"),disabled:s,children:"Volver al login"})})]})})]})]})})}export{R as ResetPasswordScreen};
